<!DOCTYPE html>
<html>
<head>
  <% include ../partials/header.ejs %>
  <style>
    #googleMapDiv{
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      z-index: -999;
    }
  </style>
</head>
<body>
<div id="googleMapDiv"></div>
<div class="fixed-action-btn click-to-toggle" style="position:absolute;bottom:10px;right:10px;">
  <a class="btn-floating btn-large waves-effect waves-light red">
    <i class="material-icons">menu</i>
  </a>
  <ul>
    <li><a class="btn-floating modal-trigger" href="#contactUs"><i class="material-icons">supervisor_account</i></a></li>
    <li><a class="btn-floating red" id="centerLocationBut"><i class="material-icons">my_location</i></a></li>
    <li><a class="btn-floating yellow darken-1" id="navigationBut"><i class="material-icons">navigation</i></a></li>
    <li><a class="btn-floating modal-trigger green" href="#health"><i class="material-icons">perm_identity</i></a></li>
    <li><a class="btn-floating modal-trigger blue" href="#account"><i class="material-icons">settings</i></a></li>
  </ul>
</div>
<!-- Modal Structure -->
<div id="contactUs" class="modal">
  <div class="modal-content">
    <h4>Contact Us</h4>
    <% include ./contact/contact.ejs %>
  </div>
  <div class="modal-footer">
    <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>
<!-- Modal Structure -->
<div id="health" class="modal">
  <div class="modal-content">
    <h4>Health Manager</h4>
    <% include ./health/health.ejs %>
  </div>
  <div class="modal-footer">
    <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>
<!-- Modal Structure -->
<div id="account" class="modal">
  <div class="modal-content">
    <h4>Account</h4>
    <% include ./account/account.ejs %>
  </div>
  <div class="modal-footer">
    <a href="#!" class=" modal-action modal-close waves-effect waves-green btn-flat">Close</a>
  </div>
</div>
</body>
<script src="./js/map/googleMap.js"></script>
<script src="./js/socket/socket.js"></script>
<script>
  $(document).ready(function(){
    var navigationButToggle = false;
    $('.modal-trigger').leanModal();
    $('#centerLocationBut').click(myLocation);
    $('#navigationBut').click(getNearestBike);
    function myLocation() {
      map.setOriginLocation();
    }
    function getNearestBike() {
      if(navigationButToggle){
        navigationButToggle = false;
        map.clearPath();
      }
      else{
        navigationButToggle = true;
        map.setNearestBikePath();
      }
    }
    socket.run(map);
  });
</script>
</html>
